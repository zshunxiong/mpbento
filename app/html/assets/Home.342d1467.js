import{_ as v,B as w,c as x,a as f,b as s,w as p,r as u,o as C,d as h}from"./index.72ec1973.js";import{F as y,T,R as A}from"./ResultArea.2a8093e3.js";const D={name:"Home",components:{Button:w,FormGroup:y,Textarea:T,ResultArea:A},data:()=>({example:["\u8ACB\u6309\u7167\u683C\u5F0F\u8CBC\u4E0A\uFF0C\u4F8B\u5982:","\u9EC3\u5927\u660E,\u591A\u591A\u7DA0\u8336$75","\u9EC3\u5C0F\u660E,\u96DE\u6392\u98EF$75*2"],rawData:"",convertedData:null}),methods:{clear(){this.rawData=""},convert(){const r=this.rawData.replaceAll("\uFF0C",",").replaceAll("\uFF08","(").replaceAll("\uFF09",")").trim();try{if(r==="")throw{name:"TypeError",text:"\u8ACB\u5148\u8F38\u5165\u8CC7\u6599"};const e=[],m=[];r.split(/\n/).forEach(o=>{if(o.indexOf(",")<0)throw{name:"TypeError",text:o};const a=o.match(/^([\s\S]+),([\s\S]+)\$([0-9]*)\*?([0-9]*)$/);if(!a)throw{name:"TypeError",text:o};const n=a[1].trim(),i=a[2].trim(),c=parseInt(a[3]),t=parseInt(a[4]||1),d=m.find(_=>_.name.toLowerCase()===i.toLowerCase());d?(d.quantity+=t,d.price+=c*t):m.push({name:i,quantity:t,price:c*t});const l=e.find(_=>_.name.toLowerCase()===n.toLowerCase());l?(l.food+="\uFF0C"+i+(t>1?"*"+t:""),l.quantity+=t,l.price+=c*t):e.push({name:n,food:i+(t>1?"*"+t:""),quantity:t,price:c*t})}),this.convertedData={peopleArr:e.sort((o,a)=>o.name.toLowerCase()>a.name.toLowerCase()?1:-1),foodArr:m.sort((o,a)=>o.name.toLowerCase()>a.name.toLowerCase()?1:-1)},this.$store.dispatch("fireToast",{title:"\u8F49\u63DB\u6210\u529F"})}catch(e){console.log(e),e.name==="TypeError"&&this.$store.dispatch("fireToast",{title:"\u683C\u5F0F\u932F\u8AA4",text:e.text,variant:"error"})}},save(){if(!this.convertedData)return this.$store.dispatch("fireToast",{title:"\u4FDD\u5B58\u5931\u6557",text:"\u8ACB\u5148\u8F49\u63DB\u8CC7\u6599",variant:"warning"});localStorage.setItem("bentoApp_data",JSON.stringify(this.convertedData)),this.$store.dispatch("fireToast",{title:"\u4FDD\u5B58\u6210\u529F",text:"\u53EF\u5230\u7D00\u9304\u9801\u9762\u67E5\u770B"})},print(){if(!this.convertedData)return this.$store.dispatch("fireToast",{title:"\u5217\u5370\u5931\u6557",text:"\u8ACB\u5148\u8F49\u63DB\u8CC7\u6599",variant:"warning"});window.print()}}},k={class:"grid gap-4"},$={class:"flex justify-end"},L=h(" \u6E05\u7A7A "),g=h("\u8F49\u63DB"),B={class:"flex justify-end"},E=h(" \u5217\u5370 "),q=h(" \u4FDD\u5B58 ");function R(r,e,m,o,a,n){const i=u("Textarea"),c=u("FormGroup"),t=u("Button"),d=u("ResultArea");return C(),x("div",k,[f("div",null,[s(c,{label:"\u8ACB\u8F38\u5165\u8CC7\u6599",helperText:r.example},{default:p(()=>[s(i,{rows:9,value:r.rawData,"onUpdate:value":e[0]||(e[0]=l=>r.rawData=l),ph:"\u59D3\u540D,\u54C1\u9805$\u55AE\u50F9*\u6578\u91CF(\u9078\u586B)"},null,8,["value"])]),_:1},8,["helperText"]),f("div",$,[s(t,{variant:"outline-secondary",class:"mr-1",onClick:n.clear},{default:p(()=>[L]),_:1},8,["onClick"]),s(t,{variant:"primary",onClick:n.convert},{default:p(()=>[g]),_:1},8,["onClick"])])]),f("div",null,[s(d,{data:r.convertedData},null,8,["data"]),f("div",B,[s(t,{variant:"outline-secondary",class:"mr-1",onClick:n.print},{default:p(()=>[E]),_:1},8,["onClick"]),s(t,{variant:"primary",onClick:n.save},{default:p(()=>[q]),_:1},8,["onClick"])])])])}var S=v(D,[["render",R]]);export{S as default};
